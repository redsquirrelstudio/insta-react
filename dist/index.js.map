{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/** @jsx React.DOM */\nimport React from 'react';\nimport './styles.css';\n\nconst InstaReact = ({tag, quantity = 4, cols = 4, links = false, descriptions = false}) => {\n\n    const [posts, setPosts] = React.useState([]);\n    const [hashtag, setHashtag] = React.useState(false);\n\n    const link = (url) => {\n        if (links) {\n            window.open(url, '_blank');\n        }\n    };\n\n    const getPosts = () => {\n        setHashtag(tag[0] === '#');\n        const query = hashtag ? `https://www.instagram.com/explore/tags/${tag.replace('#', '')}/?__a=1` : `https://www.instagram.com/${tag}/?__a=1`;\n        fetch(query)\n            .then(response => {\n                if (response.status === 404) {\n                    console.error(`${hashtag ? 'Hashtag' : 'Account'} not found for the tag ${tag}`);\n                }\n                response.json().then(data => {\n                    if (data.hasOwnProperty('graphql')) {\n                        let new_posts = [];\n                        for (let i = 0; i < quantity; i++) {\n                            let post = hashtag ? data.graphql.hashtag.edge_hashtag_to_media.edges[i].node : data.graphql.user.edge_owner_to_timeline_media.edges[i].node;\n                            if (post) {\n                                new_posts.push({\n                                    id: post.id,\n                                    src: post.display_url,\n                                    url: `https://www.instagram.com/p/${post.shortcode}/`,\n                                    alt: post.accessibility_caption,\n                                    description: post.edge_media_to_caption.edges[0]['node']['text'],\n                                });\n                            }\n                        }\n                        setPosts(new_posts);\n                    }\n                })\n            }).catch(error => {\n            console.error(`Issue getting Instagram content: ${error}`);\n        });\n    }\n\n    React.useEffect(() => {\n        getPosts();\n    }, []);\n\n\n    return (\n        <div className=\"insta-react\">\n            {posts.map(post => {\n                    return (\n                        <div onClick={() => link(post.url)} className=\"post\"\n                             style={{cursor: links ? 'pointer' : 'default', width: `${100 / cols}%`}}\n                             key={post.id}>\n                            <img alt={post.alt} src={post.src}/>\n                            {descriptions ? <p className=\"description\">{post.description}</p> : null}\n                        </div>\n                    )\n                }\n            )}\n        </div>\n    )\n};\n\nexport default InstaReact;"],"names":["InstaReact","tag","quantity","cols","links","descriptions","React","useState","posts","setPosts","hashtag","setHashtag","link","url","window","open","getPosts","query","replace","fetch","then","response","status","console","error","json","data","hasOwnProperty","new_posts","i","post","graphql","edge_hashtag_to_media","edges","node","user","edge_owner_to_timeline_media","push","id","src","display_url","shortcode","alt","accessibility_caption","description","edge_media_to_caption","useEffect","map","cursor","width"],"mappings":"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"}